// Buffer.from(JSON.stringify({})).toString('base64');
const { writeFile } = require('fs');
const writeFileUsingFS = (targetPath, environmentFileContent) => {
  writeFile(targetPath, environmentFileContent, (err) => {
    if (err) {
      console.log(err);
    }
    if (environmentFileContent !== '') {
      console.log(`wrote variables to ${targetPath}`);
    }
  });
};
const firebase = JSON.parse(Buffer.from(process.argv[2], 'base64').toString('ascii'));
const target = './src/app/configs/firebase.config.ts';
const environmentFileContent = `
  // This file was autogenerated by dynamically running ${process.argv[1]}
  export const FIREBASE_CONFIG = {
    apiKey: '${firebase.apiKey}',
    authDomain: '${firebase.authDomain}',
    projectId: '${firebase.projectId}',
    storageBucket: '${firebase.storageBucket}',
    messagingSenderId: '${firebase.messagingSenderId}',
    appId: '${firebase.appId}',
    measurementId: '${firebase.measurementId}',
  };
`;

writeFileUsingFS(target, environmentFileContent);
